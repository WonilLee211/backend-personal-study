# 오라클의 프로세스들


**여러 클라이언트가 데이터베이스의 데이터를 공유하고 있다.**

병렬 작업을 통해 높은 처리량을 구현하고 싶다.


## 오라클 SQL 요청 처리 과정

![image](https://github.com/WonilLee211/TIL/assets/109330610/1ea81caf-c28a-4074-aa67-3b368c67b1ae)

위와 같은 과정으로 sql 요청을 처리한다.

서버 프로세스 외에도 다양한 프로세스들이 여러 개 존재한다.

이는 다중 처리를 구현하기 위함이다.

disk I/O는 CPU 연산에 비해 매우 느리기 때문에 CPU 유휴시간을 최소화하기 위함이다.

그래서 **OS 상에 여러 프로세스를 실행시켜 SQL 작업을 병렬처리함으로써 자원활용을 극대화하고 높은 처리량을 구현한다.**

## 서버 프로세스와 백그라운드 프로세스의 역할

**서버 프로세스**

- 클라이언트와 통신, 서비스 처리를 담당하는 프로세스
- **요청 처리를 최우선시**하기 위해 데이터 읽기작업은 하지만, 쓰기작업은 하지 않는다.
- 원칙적으로 SQL 결과 회신에 필요한 것은 서버 프로세스가 수행한다.(예외는 존재함)
- 실제 처리를 주관하기 때문에 **튜닝할 때 서버 프로세스를 봐야 한다.** 백그라운드 프로세스는 방해되지 않는 한 상관없다.

<br>

**백그라운드 프로세스**

- 서버 프로세스의 작업을 도와주는 역할을 수행한다.
- 원칙적으로 SQL 결과 회신에 필요 없는 작업을 수행한다.(예외는 존재함)
- 종류
    1. `ora_dbwX` : 데이터베이스 라이터, 데이터를 디스크에 기록하는 역할
    2. `ora_lgwr` : 로그 라이터, 로그(데이터 갱신 이력)를 디스크에 기록하는 역할
    3. `ora_pmon` : 모니터 프로세스(피몬), 프로세스를 감시하고 장애 발생 시 정리 역할
    4. `ora_arcX` : 아카이버, 로그 데이터를 아카이브함

## 각 프로세스가 수행하는 처리

1. SQL문의 수신
2. SQL문의 최적화 및 파싱
3. 데이터 읽기
4. 데이터 기록
5. SQL문의 결과 회신
6. 각종 정리(프로세스의 비정상 종료로 인한 아무도 사용하지 않는 락의 해제)
7. 로그 보관(아카이브)


